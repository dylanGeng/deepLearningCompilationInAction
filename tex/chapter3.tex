%# -*- coding: utf-8-unix -*-

%%==================================================
\chapter{多面体编译实践}

多面体编译技术源自于法国，法国常被人们称为浪漫之都，但其实际上是一个以数学建国的国家，历史上出过许多我们耳熟能详的数学家，像笛卡尔，拉格朗日，拉普拉斯，柯西等等。
多面体编译技术的许多前辈都出自巴黎高师。

\section{理论基础：几何模型}

多面体编译技术是建立在以有理数集合为基础的数学模型上的，无理数集并不在我们的考虑范围内。这里对于有理数集和无理数集的区分其实是一个非常有意思的话题。

有理数与无理数的最大区别就是有理数可以表示为两个整数的比。这一数学特性在我们发现它的时候没有特殊的感觉，但是这一特性在多面体优化过程中却让我们受益良多。

写过程序的朋友，都知道我们一般在定义一个数组大小，以及在定义循环的上下界时都使用是无符号类型的整数或者有符号类型的整数，多面体优化的过程中会围绕着这些整数变量，
建立一系列的等式和不等式，最终都会落在有理数集上。

我们在写C/C++代码的时候，不会写出下面的例子:
\begin{lstlisting}[language={C}, caption={一段C源代码}]
for(double i = 0.0; i < sqrt(20); i = i+ 1.0) {
    ......
}

double A[sqrt(5)];
\end{lstlisting}


\subsection{多面体编译相关定义}

初次接触多面体编译的朋友会被polyhedron和polytope两个词搞混淆。简单的说，如果$\mathbb{Q}^{d}$的每一个维度都被bound住了就是一个Rational polytope，
如果有一个维度没有被bound住，就是一个Rational polyhedron。下面我们来看下两者的数学定义。

多面体编译技术常见一些数学定义:
\begin{mydef}{有理多面体Rational polyhedron}{1}
	一个有理多面体$P$是集合$\mathbb{Q}^{d}$的一个子空间，由有限个超平面(hyperplanes)所界定.
	\begin{itemize}
		\item[(1)] 乘法对加法有分配律：$a ( b + c ) = a b + a c$.
	\end{itemize}
\end{mydef}


首先我们要区别凸集(Convex Set)和非凸集。对于非凸集，我们的直观概念就是有一块凹进去了，那么更严谨的定义是什么呢？
我们任取图形中的两个点，连成一条线，如果该线段的所有点都落在图形内，就说明它是一个凸集。

凸优化问题有一个非常重要的性质，就是其局部最优解即为全局最优解。

我们进一步从凸集的概念引申到凸包(Convex hull)。Convex hull是计算几何中一个非常经典的概念。它解决的问题在于给定空间一堆离散的点，计算包含所有点的凸多边形。

求凸包的方法有很多，这里介绍Graham扫描法和Andrew算法。

在凸包(Convex hull)的基础上，我们再引申到仿射包(Affine hull)。

从定义上，我们可以看出两者的主要区别是
